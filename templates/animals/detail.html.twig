{% extends 'base.html.twig' %}

{% block title %}{{ animal.prenom }} - Zoo Arcadia{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/animals.css') }}">
{% endblock %}

{% block body %}
    <!-- Header -->
    <header class="header">
        <div class="logo">Arcadia Zoo</div>
        <nav class="navbar">
            <ul>
                <li><a href="{{ path('app_home') }}">Accueil</a></li>
                <li><a href="{{ path('app_animals') }}">Animaux</a></li>
                <li><a href="{{ path('app_services') }}">Services</a></li>
                <li><a href="{{ path('app_habitats') }}">Habitats</a></li>
                <li><a href="{{ path('app_contact') }}">Contact</a></li>
                <li><a href="{{ path('app_login') }}">Connexion</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Banner -->
    <section class="animal-hero">
        <img src="{{ animal.images ? asset(animal.images) : asset('img/lion.webp') }}" alt="{{ animal.prenom }}" class="hero-bg">
        <div class="hero-overlay">
            <h1>{{ animal.prenom }}</h1>
            <span class="animal-race">{{ animal.race }}</span>
        </div>
    </section>

    <!-- Animal Detail Content -->
    <section class="animal-detail-content">
        <div class="detail-container">
            <!-- Main Info Card -->
            <div class="info-card main-card">
                <div class="card-header">
                    <span class="icon">ü¶Å</span>
                    <h2>Fiche d'identit√©</h2>
                </div>
                <div class="card-body">
                    <div class="info-row">
                        <span class="label">Pr√©nom</span>
                        <span class="value">{{ animal.prenom }}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Esp√®ce</span>
                        <span class="value">{{ animal.race }}</span>
                    </div>
                    {% if animal.habitat %}
                    <div class="info-row">
                        <span class="label">Habitat</span>
                        <span class="value">
                            <a href="{{ path('app_habitat_detail', {'id': animal.habitat.id}) }}" class="habitat-link">
                                {{ animal.habitat.nom }}
                            </a>
                        </span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Habitat Card -->
            {% if animal.habitat %}
            <div class="info-card habitat-card">
                <div class="card-header">
                    <span class="icon">üåø</span>
                    <h2>Son habitat</h2>
                </div>
                <div class="card-body">
                    <img src="{{ animal.habitat.images ? asset(animal.habitat.images) : asset('img/savane.webp') }}" alt="{{ animal.habitat.nom }}" class="habitat-preview">
                    <h3>{{ animal.habitat.nom }}</h3>
                    <p>{{ animal.habitat.description|slice(0, 150) }}{% if animal.habitat.description|length > 150 %}...{% endif %}</p>
                    <a href="{{ path('app_habitat_detail', {'id': animal.habitat.id}) }}" class="btn btn-secondary">D√©couvrir l'habitat</a>
                </div>
            </div>
            {% endif %}

            <!-- Veterinary Reports -->
            {% if animal.veterinaryReports|length > 0 %}
            <div class="info-card health-card">
                <div class="card-header">
                    <span class="icon">ü©∫</span>
                    <h2>√âtat de sant√©</h2>
                </div>
                <div class="card-body">
                    {% set lastReport = animal.veterinaryReports|last %}
                    <div class="health-status {{ lastReport.etat|lower }}">
                        <span class="status-badge">{{ lastReport.etat }}</span>
                        <span class="status-date">{{ lastReport.datePassage|date('d/m/Y') }}</span>
                    </div>
                    {% if lastReport.details %}
                    <p class="health-details">{{ lastReport.details|slice(0, 200) }}{% if lastReport.details|length > 200 %}...{% endif %}</p>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Back Button -->
        <div class="actions">
            <a href="{{ path('app_animals') }}" class="btn btn-back">
                ‚Üê Retour √† tous les animaux
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="logo">Arcadia Zoo</div>
        <ul>
            <li><a href="{{ path('app_habitats') }}">Habitats</a></li>
            <li><a href="{{ path('app_services') }}">Services</a></li>
            <li><a href="{{ path('app_contact') }}">Contact</a></li>
            <li><a href="{{ path('app_about') }}">√Ä propos</a></li>
        </ul>
        <p>¬© 2025 Arcadia Zoo. RGPD. Cookies.</p>
    </footer>
{% endblock %}